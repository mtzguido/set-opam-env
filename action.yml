name: 'Set OPAM environment variables'
description: 'Runs "opam env" and extends the environment for subsequent steps (via $GITHUB_ENV)'
inputs:
  switch:
    description: 'Name of desired OPAM switch, leave blank for default'
    required: false
    default: ''

runs:
  using: "composite"
  steps:
    - name: Run script and append to env
      shell: bash
      run: ${{ github.action_path }}/opam-env-bare.sh ${{ inputs.switch }} >>$GITHUB_ENV
